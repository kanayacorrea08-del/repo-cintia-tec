<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OVA: Technical Vocabulary - Algorithms</title>
  <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-slate-50">

<div class="flex min-h-screen">
  <!-- Sidebar -->
  <aside class="w-64 bg-white shadow-lg flex-shrink-0 hidden md:flex md:flex-col sticky-sidebar">
    <div class="p-4">
      <div style="width: 150px; height: 150px;" class="p-2 mx-auto flex items-center justify-center bg-white rounded-full shadow-lg border-2 border-green-500 transition-shadow duration-300 hover:shadow-green-400">
          <img src="img/logo.webp" alt="Logo OVA" class="w-5/6 h-5/6 object-contain" loading="lazy">
      </div>
  </div>
    <nav class="mt-6 flex-1">
      <a href="#" class="sidebar-link active flex items-center py-3 px-6 font-medium text-slate-700" data-target="introduccion"><span class="mr-3 text-xl">🚀</span> Introducción</a>
      <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="objetivos"><span class="mr-3 text-xl">🎯</span> Objetivos</a>
      <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="contenido"><span class="mr-3 text-xl">📚</span> Contenido</a>
      <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="actividades"><span class="mr-3 text-xl">✍️</span> Actividades</a>
      <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="evaluacion"><span class="mr-3 text-xl">✔️</span> Evaluación</a>
      <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="recursos"><span class="mr-3 text-xl">📖</span> Recursos</a>
      <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="bibliografia"><span class="mr-3 text-xl">📚</span> Bibliografía</a>
    </nav>
  </aside>

        <!-- Main Content -->
  <main class="flex-1 p-4 sm:p-6 md:p-10 bg-gray-50">
      <!-- Mobile header -->
      <div class="md:hidden mb-6 flex flex-col items-center">
        <div style="width: 100px; height: 100px;" class="p-2 flex items-center justify-center bg-white rounded-full shadow-lg transition-shadow duration-300 hover:shadow-green-400 mb-2">
          <img src="img/logo.webp" alt="Logo OVA" class="w-5/6 h-5/6 object-contain" loading="lazy">
        </div>
        <select id="mobile-nav" class="w-full mt-2 p-2 border rounded-md bg-white shadow-sm">
          <option value="introduccion">🚀 Introducción</option>
          <option value="objetivos">🎯 Objetivos</option>
          <option value="contenido">📚 Contenido</option>
          <option value="actividades">✍️ Actividades</option>
          <option value="evaluacion">✔️ Evaluación</option>
          <option value="recursos">📖 Recursos</option>
          <option value="bibliografia">📚 Bibliografía</option>
        </select>
      </div>

    <!-- Introducción -->
    <section id="introduccion" class="content-pane active">
      <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-4">Technical Vocabulary - Algorithms</h2>
      <p class="text-slate-700 leading-relaxed mb-4">
        En el mundo de la programación y la informática, los algoritmos son el corazón de todo sistema digital. Un algoritmo es como una receta paso a paso que le dice a la computadora cómo resolver un problema específico 🔧. Desde buscar información en Google hasta recomendar videos en YouTube, desde calcular la ruta más rápida en un GPS hasta procesar transacciones bancarias 💳, los algoritmos están en todas partes.
      </p>
      <p class="text-slate-700 leading-relaxed mb-4">
        💻 Como estudiante de programación, necesitas dominar el vocabulario técnico en inglés relacionado con algoritmos. Este lenguaje especializado te permitirá comunicarte efectivamente con otros programadores, entender documentación técnica, participar en foros de desarrollo y acceder a recursos de aprendizaje de clase mundial. Cada término que aprendas aquí te acercará más a convertirte en un desarrollador profesional competente.
      </p>
      <div class="bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-500 rounded-r-lg p-4 mb-4">
        <p class="text-green-800 font-semibold mb-2">🎯 ¿Qué aprenderás en este módulo?</p>
        <ul class="text-green-800 text-sm space-y-1">
          <li>• Vocabulario técnico fundamental sobre algoritmos y estructuras de datos</li>
          <li>• Términos especializados para describir complejidad computacional</li>
          <li>• Cómo explicar procesos algorítmicos en inglés técnico</li>
          <li>• Expresiones para discutir eficiencia y optimización de algoritmos</li>
        </ul>
      </div>
      <div class="bg-yellow-50 border-l-4 border-yellow-500 rounded-r-lg p-4">
        <p class="text-yellow-800 text-sm">
          <strong>💡 Consejo:</strong> Este vocabulario técnico es esencial para tu carrera como programador. El inglés es el idioma universal en la tecnología, y dominar estos términos te permitirá acceder a recursos de aprendizaje avanzados, colaborar en proyectos internacionales y destacarte en entrevistas técnicas. ¡Cada término que aprendas aquí te acercará más a tus metas profesionales!
        </p>
      </div>
                <!-- Componente de síntesis de voz para introducción -->
                <div class="speech-controls mb-4 p-3 bg-green-100 rounded-lg flex items-center flex-wrap gap-2 mt-4" data-target="introduccion">
                    <button class="play-btn bg-green-600 hover:bg-green-700 text-white font-medium py-1 px-4 rounded-full flex items-center">
                        <span class="mr-1">▶️</span> Leer
                    </button>
                    <button class="pause-btn bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏸️</span> Pausar
                    </button>
                    <button class="stop-btn bg-red-500 hover:bg-red-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏹️</span> Detener
                    </button>
                    <div class="flex items-center ml-2">
                        <label for="speech-rate-introduccion" class="text-sm text-green-800 mr-2">Velocidad:</label>
                        <input type="range" class="speech-rate" id="speech-rate-introduccion" min="0.5" max="2" step="0.1" value="1" class="w-24">
                    </div>
                </div>
    </section>

    <!-- Objetivos -->
    <section id="objetivos" class="content-pane">
      <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Learning Goals</h2>
      <ul class="space-y-4">
        <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
          <span class="text-green-700 mr-3 text-2xl">1.</span>
          <span>Identificar términos técnicos fundamentales en inglés relacionados con algoritmos y estructuras de datos (algorithm, data structure, complexity, efficiency).</span>
        </li>
        <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
          <span class="text-green-700 mr-3 text-2xl">2.</span>
          <span>Reconocer vocabulario especializado para describir tipos de algoritmos y sus características (sorting, searching, recursive, iterative, optimization).</span>
        </li>
        <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
          <span class="text-green-700 mr-3 text-2xl">3.</span>
          <span>Asociar conceptos algorítmicos con su terminología técnica correspondiente en inglés.</span>
        </li>
        <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
          <span class="text-green-700 mr-3 text-2xl">4.</span>
          <span>Practicar la pronunciación y el uso de este vocabulario técnico en contextos de programación y desarrollo.</span>
        </li>
        <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
          <span class="text-green-700 mr-3 text-2xl">5.</span>
          <span>Aplicar el vocabulario aprendido para explicar algoritmos y discutir eficiencia computacional en inglés técnico.</span>
        </li>
      </ul>
                <!-- Componente de síntesis de voz para objetivos -->
                <div class="speech-controls mb-4 p-3 bg-green-100 rounded-lg flex items-center flex-wrap gap-2 mt-4" data-target="objetivos">
                    <button class="play-btn bg-green-600 hover:bg-green-700 text-white font-medium py-1 px-4 rounded-full flex items-center">
                        <span class="mr-1">▶️</span> Leer
                    </button>
                    <button class="pause-btn bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏸️</span> Pausar
                    </button>
                    <button class="stop-btn bg-red-500 hover:bg-red-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏹️</span> Detener
                    </button>
                    <div class="flex items-center ml-2">
                        <label for="speech-rate-objetivos" class="text-sm text-green-800 mr-2">Velocidad:</label>
                        <input type="range" class="speech-rate" id="speech-rate-objetivos" min="0.5" max="2" step="0.1" value="1" class="w-24">
                    </div>
                </div>
    </section>

    <!-- Contenido -->
    <section id="contenido" class="content-pane">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Content</h2>

                <!-- Key Vocabulary -->
      <div class="mb-6">
                    <h3 class="text-xl font-bold text-green-700 mb-2">Technical Vocabulary - Algorithms</h3>
                    <p class="text-slate-600 mb-4">Tap to listen 🔊</p>
                    
                    <!-- Imagen de rutina diaria -->
                    <div class="mb-6 text-center">
                        <img src="img/My daily routine.jpeg" alt="My Daily Routine - Mi Rutina Diaria" 
                             class="mx-auto rounded-lg shadow-lg max-w-full h-auto cursor-pointer hover:opacity-90 transition-opacity duration-200" 
                             style="max-height: 400px; width: auto;"
                             onclick="openImageModal(this.src, this.alt)">
                        <p class="text-sm text-slate-500 mt-2 italic">Haz clic en la imagen para ampliarla</p>
                    </div>
                    
        <!-- Vocabulario por categorías -->
        <div class="space-y-6">
          <!-- Conceptos Básicos -->
          <div class="bg-orange-50 border-l-4 border-orange-500 rounded-r-lg p-4">
            <h4 class="text-orange-800 font-semibold mb-3 flex items-center">
              <span class="mr-2">🔧</span> Conceptos Básicos - Basic Concepts
            </h4>
            <div id="morning-vocab" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
          </div>

          <!-- Estructuras de Datos -->
          <div class="bg-blue-50 border-l-4 border-blue-500 rounded-r-lg p-4">
            <h4 class="text-blue-800 font-semibold mb-3 flex items-center">
              <span class="mr-2">📊</span> Estructuras de Datos - Data Structures
            </h4>
            <div id="school-vocab" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
          </div>

          <!-- Tipos de Algoritmos -->
          <div class="bg-yellow-50 border-l-4 border-yellow-500 rounded-r-lg p-4">
            <h4 class="text-yellow-800 font-semibold mb-3 flex items-center">
              <span class="mr-2">⚙️</span> Tipos de Algoritmos - Algorithm Types
            </h4>
            <div id="meals-vocab" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
          </div>

          <!-- Complejidad Computacional -->
          <div class="bg-purple-50 border-l-4 border-purple-500 rounded-r-lg p-4">
            <h4 class="text-purple-800 font-semibold mb-3 flex items-center">
              <span class="mr-2">📈</span> Complejidad Computacional - Computational Complexity
            </h4>
            <div id="social-vocab" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
          </div>

          <!-- Técnicas de Optimización -->
          <div class="bg-pink-50 border-l-4 border-pink-500 rounded-r-lg p-4">
            <h4 class="text-pink-800 font-semibold mb-3 flex items-center">
              <span class="mr-2">🚀</span> Técnicas de Optimización - Optimization Techniques
            </h4>
            <div id="entertainment-vocab" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
          </div>

          <!-- Algoritmos de Búsqueda -->
          <div class="bg-indigo-50 border-l-4 border-indigo-500 rounded-r-lg p-4">
            <h4 class="text-indigo-800 font-semibold mb-3 flex items-center">
              <span class="mr-2">🔍</span> Algoritmos de Búsqueda - Search Algorithms
            </h4>
            <div id="evening-vocab" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
          </div>

          <!-- Algoritmos de Ordenamiento -->
          <div class="bg-green-50 border-l-4 border-green-500 rounded-r-lg p-4">
            <h4 class="text-green-800 font-semibold mb-3 flex items-center">
              <span class="mr-2">🔄</span> Algoritmos de Ordenamiento - Sorting Algorithms
            </h4>
            <div id="tech-vocab" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
          </div>
        </div>
                    <div class="bg-yellow-50 border-l-4 border-yellow-500 rounded-r-lg p-4">
                        <p class="text-yellow-800 text-sm">
                            <strong>✨ Note:</strong> Este vocabulario técnico es tu caja de herramientas profesional. Con estas palabras podrás:
                        </p>
                        <ul class="text-yellow-800 text-sm mt-2 ml-4">
                            <li>• Explicar algoritmos complejos en entrevistas técnicas.</li>
                            <li>• Participar en discusiones sobre eficiencia computacional.</li>
                            <li>• Leer y entender documentación técnica en inglés.</li>
                            <li>• Colaborar en proyectos de desarrollo de software internacionales.</li>
                        </ul>
                    </div>
      </div>

    </section>

    <!-- Actividades -->
    <section id="actividades" class="content-pane">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Activities</h2>

      <!-- Drag & Drop Matching -->
      <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6 mb-6">
        <h3 class="text-xl font-bold text-green-700 mb-2">1) Empareja: Inglés ↔ Español</h3>
        <p class="text-slate-600 mb-4">Arrastra cada expresión en inglés hacia su traducción correcta.</p>
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <h4 class="font-semibold mb-2">Palabras (Arrastra)</h4>
            <div id="drag-bank" class="grid grid-cols-2 gap-2"></div>
          </div>
          <div>
            <h4 class="font-semibold mb-2">Traducciones (Suelta Aquí)</h4>
            <div id="drop-bank" class="grid grid-cols-1 sm:grid-cols-2 gap-2"></div>
          </div>
        </div>
        <button id="check-matching" class="mt-4 bg-green-600 text-white font-semibold py-2 px-4 rounded hover:bg-green-700">Verificar</button>
        <div id="matching-result" class="mt-3 font-medium"></div>
      </div>

      <!-- Cloze (fill in blanks) -->
      <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6 mb-6">
        <h3 class="text-xl font-bold text-green-700 mb-2">2) Completa Las Frases</h3>
        <p class="text-slate-600 mb-3">Usa estas palabras: <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">algorithm</span> <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">time complexity</span> <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">data structure</span> <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">binary</span> <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">merge</span> <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">dynamic</span> <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">worst</span> <span class="tag inline-block px-2 py-1 rounded bg-green-50 text-green-700">big O</span></p>
        <div id="cloze-list" class="space-y-3"></div>
        <button id="check-cloze" class="mt-4 bg-green-600 text-white font-semibold py-2 px-4 rounded hover:bg-green-700">Comprobar</button>
        <div id="cloze-result" class="mt-3 font-medium"></div>
      </div>

      <!-- Ordering tokens -->
      <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6 mb-6">
        <h3 class="text-xl font-bold text-green-700 mb-2">3) Ordena Las Oraciones</h3>
        <p class="text-slate-600 mb-3">Las palabras están desordenadas. Tu tarea es colocarlas en el orden correcto para formar oraciones con sentido en inglés.</p>
        <div id="order-list" class="space-y-4"></div>
        <button id="check-order" class="mt-4 bg-green-600 text-white font-semibold py-2 px-4 rounded hover:bg-green-700">Comprobar</button>
        <div id="order-result" class="mt-3 font-medium"></div>
      </div>

      <!-- Speaking / Recording -->
      <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6">
        <h3 class="text-xl font-bold text-green-700 mb-2">4) Speaking: Explica Un Algoritmo</h3>
        <p class="text-slate-600 mb-3">Graba un audio (30–60 s) explicando un algoritmo usando al menos 5 términos técnicos. Ejemplo: <i>An algorithm is a step-by-step procedure. Binary search has logarithmic time complexity. Merge sort uses divide and conquer technique. Dynamic programming optimizes solutions by storing results. Big O notation describes the worst case performance.</i></p>
        
        <!-- Controles de grabación -->
        <div class="flex items-center gap-3 mb-4">
          <button id="rec-start" class="bg-green-600 text-white font-semibold py-2 px-4 rounded hover:bg-green-700 transition-colors">
            🎙️ Iniciar
          </button>
          <button id="rec-stop" class="bg-red-600 text-white font-semibold py-2 px-4 rounded hover:bg-red-700 transition-colors" disabled>
            ⏹️ Detener
          </button>
        </div>
        
        <!-- Estado y temporizador -->
        <div class="flex items-center gap-4 mb-4">
          <span id="rec-status" class="text-slate-600 font-medium">Listo para grabar</span>
          <div id="rec-timer" class="hidden text-lg font-mono text-green-700 bg-green-50 px-3 py-1 rounded recording-timer">
            <span id="rec-time">00:00</span>
          </div>
        </div>
        
        <!-- Indicador visual de grabación -->
        <div id="rec-indicator" class="hidden mb-4">
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-red-500 rounded-full recording-indicator"></div>
            <span class="text-red-600 font-medium">Grabando...</span>
          </div>
        </div>
        
                 <!-- Área de audio grabado -->
         <div id="rec-audio" class="mt-4"></div>
         
         <!-- Botón de verificación -->
         <div id="verification-section" class="mt-4 hidden">
           <button id="verify-audio" class="bg-blue-600 text-white font-semibold py-2 px-4 rounded hover:bg-blue-700 transition-colors">
             🔍 Verificar cumplimiento de criterios
           </button>
           <div id="verification-result" class="mt-3"></div>
         </div>
        
                 <!-- Instrucciones adicionales -->
         <div class="mt-4 p-3 bg-blue-50 border-l-4 border-blue-400 rounded-r text-blue-800 text-sm">
           💡 <strong>Consejos:</strong> Habla claramente, menciona al menos 5 términos técnicos de algoritmos, y usa frases completas en inglés técnico.
         </div>
         
         <!-- Criterios de evaluación -->
         <div class="mt-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded-r text-yellow-800 text-sm">
           📋 <strong>Criterios de evaluación:</strong>
           <ul class="mt-2 space-y-1 text-xs">
             <li>• Duración: 30-60 segundos</li>
             <li>• Calidad: Audio claro sin silencios prolongados</li>
             <li>• Contenido: Mínimo 5 términos técnicos de algoritmos</li>
             <li>• Idioma: Frases en inglés técnico</li>
             <li>• Estructura: Oraciones completas explicando conceptos</li>
           </ul>
         </div>
      </div>
    </section>

    <!-- Evaluación -->
    <section id="evaluacion" class="content-pane">
      <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Evaluación</h2>
      <div class="bg-white p-6 rounded-lg shadow-md">
        <p class="text-slate-600 mb-4">Responde todas las preguntas. Recibirás retroalimentación inmediata.</p>
        <div id="quiz-container" class="space-y-6"></div>
        <button id="submit-quiz-btn" class="mt-2 bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700">Finalizar evaluación</button>
        <button id="reset-quiz-btn" class="mt-2 ml-2 bg-slate-100 text-slate-800 font-semibold py-2 px-6 rounded-lg hover:bg-slate-200">Reintentar</button>
        <div id="quiz-result" class="mt-4 text-lg font-bold"></div>
      </div>
    </section>

    <!-- Recursos -->
    <section id="recursos" class="content-pane">
      <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Recursos Para Profundizar</h2>
      <ul class="space-y-4">
        <li class="bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500">
          <h3 class="font-bold text-green-700">GeeksforGeeks – Algorithms and Data Structures</h3>
          <a class="underline text-slate-700 hover:text-green-700" href="https://www.geeksforgeeks.org/fundamentals-of-algorithms/" target="_blank">Ir al recurso</a>
        </li>
        <li class="bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500">
          <h3 class="font-bold text-green-700">LeetCode – Practice Coding Problems</h3>
          <a class="underline text-slate-700 hover:text-green-700" href="https://leetcode.com/" target="_blank">Ir al recurso</a>
        </li>
        <li class="bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500">
          <h3 class="font-bold text-green-700">Coursera – Algorithms Specialization</h3>
          <a class="underline text-slate-700 hover:text-green-700" href="https://www.coursera.org/specializations/algorithms" target="_blank">Ir al recurso</a>
        </li>
        <li class="bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500">
          <h3 class="font-bold text-green-700">Khan Academy – Computer Science</h3>
          <a class="underline text-slate-700 hover:text-green-700" href="https://www.khanacademy.org/computing/computer-science/algorithms" target="_blank">Ir al recurso</a>
        </li>
        <li class="bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500">
          <h3 class="font-bold text-green-700">MIT OpenCourseWare – Introduction to Algorithms</h3>
          <a class="underline text-slate-700 hover:text-green-700" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-fall-2011/" target="_blank">Ir al recurso</a>
        </li>
        <li class="bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500">
          <h3 class="font-bold text-green-700">Visualgo – Algorithm Visualizations</h3>
          <a class="underline text-slate-700 hover:text-green-700" href="https://visualgo.net/" target="_blank">Ir al recurso</a>
        </li>
      </ul>
    </section>

    <!-- Bibliografía -->
    <section id="bibliografia" class="content-pane">
      <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Bibliografía</h2>
      <div class="space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
          <span class="block text-slate-700">Cormen, T. H., Leiserson, C. E., Rivest, R. L., & Stein, C. (2022). <i>Introduction to Algorithms</i> (4th ed.). MIT Press.</span>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
          <span class="block text-slate-700">Sedgewick, R., & Wayne, K. (2011). <i>Algorithms</i> (4th ed.). Addison-Wesley Professional.</span>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
          <span class="block text-slate-700">Skiena, S. S. (2008). <i>The Algorithm Design Manual</i> (2nd ed.). Springer.</span>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
          <span class="block text-slate-700">GeeksforGeeks. (2023). <i>Data Structures and Algorithms</i>. https://www.geeksforgeeks.org</span>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
          <span class="block text-slate-700">Khan Academy. (2023). <i>Computer Science: Algorithms</i>. https://www.khanacademy.org</span>
        </div>
      </div>

      <footer class="mt-12 pt-6 border-t-2 border-slate-200 text-center">
        <p class="text-slate-600 font-medium">Creado por:</p>
        <p class="text-green-800 font-bold text-lg">Centro de Innovación en TIC para el apoyo de la Docencia CINTIA</p>
        <p class="text-green-800 font-bold text-lg">Universidad de Córdoba</p>
      </footer>
    </section>

  </main>
</div>


<script>
/* ===== Navegación panes ===== */
document.addEventListener('DOMContentLoaded', () => {
  const links = document.querySelectorAll('.sidebar-link');
  const panes = document.querySelectorAll('.content-pane');
  const mobile = document.getElementById('mobile-nav');

  function switchPane(id){
    panes.forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    links.forEach(l=>l.classList.toggle('active', l.dataset.target===id));
    if(mobile && mobile.value!==id) mobile.value=id;
  }
  links.forEach(l=>l.addEventListener('click', e=>{
    e.preventDefault();
    switchPane(l.dataset.target);
  }));
  mobile && mobile.addEventListener('change', e=>switchPane(e.target.value));
});

/* ===== TTS helper ===== */
function speak(text){
  if (!('speechSynthesis' in window)) {
    alert('Tu navegador no soporta síntesis de voz');
    return;
  }
  
  speechSynthesis.cancel();
  
  try{
    const u=new SpeechSynthesisUtterance(text);
    u.lang='en-US';
    u.rate = 0.8;
    u.pitch = 1;
    u.volume = 1;
    
    u.onerror = (event) => {
      alert('Error en la síntesis de voz: ' + event.error);
    };
    
    setTimeout(() => {
      speechSynthesis.speak(u);
    }, 100);
    
  }catch(e){
    alert('Tu navegador no permite pronunciación automática: ' + e.message);
  }
}

/* ===== Vocabulario con TTS ===== */
const VOCAB = [
  // Conceptos básicos
  {en:'algorithm', es:'algoritmo'},
  {en:'data structure', es:'estructura de datos'},
  {en:'input', es:'entrada'},
  {en:'output', es:'salida'},
  {en:'process', es:'proceso'},
  {en:'step', es:'paso'},
  {en:'sequence', es:'secuencia'},
  {en:'iteration', es:'iteración'},
  {en:'recursion', es:'recursión'},
  {en:'base case', es:'caso base'},
  {en:'recursive case', es:'caso recursivo'},
  {en:'termination', es:'terminación'},
  {en:'convergence', es:'convergencia'},
  {en:'divergence', es:'divergencia'},
  {en:'loop', es:'bucle'},
  
  // Estructuras de datos
  {en:'array', es:'arreglo'},
  {en:'list', es:'lista'},
  {en:'stack', es:'pila'},
  {en:'queue', es:'cola'},
  {en:'tree', es:'árbol'},
  {en:'graph', es:'grafo'},
  {en:'hash table', es:'tabla hash'},
  {en:'heap', es:'montículo'},
  {en:'linked list', es:'lista enlazada'},
  {en:'binary tree', es:'árbol binario'},
  {en:'node', es:'nodo'},
  {en:'edge', es:'arista'},
  {en:'vertex', es:'vértice'},
  {en:'root', es:'raíz'},
  {en:'leaf', es:'hoja'},
  
  // Tipos de algoritmos
  {en:'sorting algorithm', es:'algoritmo de ordenamiento'},
  {en:'searching algorithm', es:'algoritmo de búsqueda'},
  {en:'greedy algorithm', es:'algoritmo voraz'},
  {en:'dynamic programming', es:'programación dinámica'},
  {en:'divide and conquer', es:'divide y vencerás'},
  {en:'backtracking', es:'retroceso'},
  {en:'brute force', es:'fuerza bruta'},
  {en:'heuristic', es:'heurística'},
  {en:'randomized algorithm', es:'algoritmo aleatorio'},
  {en:'approximation algorithm', es:'algoritmo de aproximación'},
  {en:'parallel algorithm', es:'algoritmo paralelo'},
  {en:'distributed algorithm', es:'algoritmo distribuido'},
  {en:'online algorithm', es:'algoritmo en línea'},
  {en:'offline algorithm', es:'algoritmo fuera de línea'},
  {en:'deterministic', es:'determinista'},
  
  // Complejidad computacional
  {en:'time complexity', es:'complejidad temporal'},
  {en:'space complexity', es:'complejidad espacial'},
  {en:'big O notation', es:'notación O grande'},
  {en:'asymptotic analysis', es:'análisis asintótico'},
  {en:'worst case', es:'peor caso'},
  {en:'best case', es:'mejor caso'},
  {en:'average case', es:'caso promedio'},
  {en:'linear time', es:'tiempo lineal'},
  {en:'quadratic time', es:'tiempo cuadrático'},
  {en:'logarithmic time', es:'tiempo logarítmico'},
  {en:'exponential time', es:'tiempo exponencial'},
  {en:'constant time', es:'tiempo constante'},
  {en:'polynomial time', es:'tiempo polinomial'},
  {en:'efficiency', es:'eficiencia'},
  {en:'performance', es:'rendimiento'},
  
  // Técnicas de optimización
  {en:'optimization', es:'optimización'},
  {en:'memoization', es:'memoización'},
  {en:'caching', es:'caché'},
  {en:'pruning', es:'poda'},
  {en:'early termination', es:'terminación temprana'},
  {en:'lazy evaluation', es:'evaluación perezosa'},
  {en:'space-time tradeoff', es:'compromiso espacio-tiempo'},
  {en:'in-place algorithm', es:'algoritmo in-situ'},
  {en:'stable algorithm', es:'algoritmo estable'},
  {en:'adaptive algorithm', es:'algoritmo adaptativo'},
  {en:'cache-friendly', es:'amigable con caché'},
  {en:'memory efficient', es:'eficiente en memoria'},
  {en:'CPU efficient', es:'eficiente en CPU'},
  {en:'scalable', es:'escalable'},
  {en:'robust', es:'robusto'},
  
  // Algoritmos de búsqueda
  {en:'linear search', es:'búsqueda lineal'},
  {en:'binary search', es:'búsqueda binaria'},
  {en:'depth-first search', es:'búsqueda en profundidad'},
  {en:'breadth-first search', es:'búsqueda en anchura'},
  {en:'A* search', es:'búsqueda A*'},
  {en:'Dijkstra algorithm', es:'algoritmo de Dijkstra'},
  {en:'Bellman-Ford', es:'Bellman-Ford'},
  {en:'Floyd-Warshall', es:'Floyd-Warshall'},
  {en:'Kruskal algorithm', es:'algoritmo de Kruskal'},
  {en:'Prim algorithm', es:'algoritmo de Prim'},
  {en:'topological sort', es:'ordenamiento topológico'},
  {en:'strongly connected components', es:'componentes fuertemente conexos'},
  {en:'minimum spanning tree', es:'árbol de expansión mínimo'},
  {en:'shortest path', es:'camino más corto'},
  
  // Algoritmos de ordenamiento
  {en:'bubble sort', es:'ordenamiento burbuja'},
  {en:'selection sort', es:'ordenamiento por selección'},
  {en:'insertion sort', es:'ordenamiento por inserción'},
  {en:'merge sort', es:'ordenamiento por mezcla'},
  {en:'quick sort', es:'ordenamiento rápido'},
  {en:'heap sort', es:'ordenamiento por montículo'},
  {en:'counting sort', es:'ordenamiento por conteo'},
  {en:'radix sort', es:'ordenamiento por raíz'},
  {en:'bucket sort', es:'ordenamiento por cubetas'},
  {en:'shell sort', es:'ordenamiento de Shell'},
  {en:'tim sort', es:'ordenamiento Tim'},
  {en:'introsort', es:'introsort'},
  {en:'stable sort', es:'ordenamiento estable'},
  {en:'in-place sort', es:'ordenamiento in-situ'},
  {en:'comparison sort', es:'ordenamiento por comparación'}
];


// Vocabulario por categorías
const VOCAB_CATEGORIES = {
  morning: [
    {en:'algorithm', es:'algoritmo'},
    {en:'data structure', es:'estructura de datos'},
    {en:'input', es:'entrada'},
    {en:'output', es:'salida'},
    {en:'process', es:'proceso'},
    {en:'step', es:'paso'},
    {en:'sequence', es:'secuencia'},
    {en:'iteration', es:'iteración'},
    {en:'recursion', es:'recursión'},
    {en:'base case', es:'caso base'},
    {en:'recursive case', es:'caso recursivo'},
    {en:'termination', es:'terminación'},
    {en:'convergence', es:'convergencia'},
    {en:'divergence', es:'divergencia'},
    {en:'loop', es:'bucle'}
  ],
  school: [
    {en:'array', es:'arreglo'},
    {en:'list', es:'lista'},
    {en:'stack', es:'pila'},
    {en:'queue', es:'cola'},
    {en:'tree', es:'árbol'},
    {en:'graph', es:'grafo'},
    {en:'hash table', es:'tabla hash'},
    {en:'heap', es:'montículo'},
    {en:'linked list', es:'lista enlazada'},
    {en:'binary tree', es:'árbol binario'},
    {en:'node', es:'nodo'},
    {en:'edge', es:'arista'},
    {en:'vertex', es:'vértice'},
    {en:'root', es:'raíz'},
    {en:'leaf', es:'hoja'}
  ],
  meals: [
    {en:'sorting algorithm', es:'algoritmo de ordenamiento'},
    {en:'searching algorithm', es:'algoritmo de búsqueda'},
    {en:'greedy algorithm', es:'algoritmo voraz'},
    {en:'dynamic programming', es:'programación dinámica'},
    {en:'divide and conquer', es:'divide y vencerás'},
    {en:'backtracking', es:'retroceso'},
    {en:'brute force', es:'fuerza bruta'},
    {en:'heuristic', es:'heurística'},
    {en:'randomized algorithm', es:'algoritmo aleatorio'},
    {en:'approximation algorithm', es:'algoritmo de aproximación'},
    {en:'parallel algorithm', es:'algoritmo paralelo'},
    {en:'distributed algorithm', es:'algoritmo distribuido'},
    {en:'online algorithm', es:'algoritmo en línea'},
    {en:'offline algorithm', es:'algoritmo fuera de línea'},
    {en:'deterministic', es:'determinista'}
  ],
  social: [
    {en:'time complexity', es:'complejidad temporal'},
    {en:'space complexity', es:'complejidad espacial'},
    {en:'big O notation', es:'notación O grande'},
    {en:'asymptotic analysis', es:'análisis asintótico'},
    {en:'worst case', es:'peor caso'},
    {en:'best case', es:'mejor caso'},
    {en:'average case', es:'caso promedio'},
    {en:'linear time', es:'tiempo lineal'},
    {en:'quadratic time', es:'tiempo cuadrático'},
    {en:'logarithmic time', es:'tiempo logarítmico'},
    {en:'exponential time', es:'tiempo exponencial'},
    {en:'constant time', es:'tiempo constante'},
    {en:'polynomial time', es:'tiempo polinomial'},
    {en:'efficiency', es:'eficiencia'},
    {en:'performance', es:'rendimiento'}
  ],
  entertainment: [
    {en:'optimization', es:'optimización'},
    {en:'memoization', es:'memoización'},
    {en:'caching', es:'caché'},
    {en:'pruning', es:'poda'},
    {en:'early termination', es:'terminación temprana'},
    {en:'lazy evaluation', es:'evaluación perezosa'},
    {en:'space-time tradeoff', es:'compromiso espacio-tiempo'},
    {en:'in-place algorithm', es:'algoritmo in-situ'},
    {en:'stable algorithm', es:'algoritmo estable'},
    {en:'adaptive algorithm', es:'algoritmo adaptativo'},
    {en:'cache-friendly', es:'amigable con caché'},
    {en:'memory efficient', es:'eficiente en memoria'},
    {en:'CPU efficient', es:'eficiente en CPU'},
    {en:'scalable', es:'escalable'},
    {en:'robust', es:'robusto'}
  ],
  evening: [
    {en:'linear search', es:'búsqueda lineal'},
    {en:'binary search', es:'búsqueda binaria'},
    {en:'depth-first search', es:'búsqueda en profundidad'},
    {en:'breadth-first search', es:'búsqueda en anchura'},
    {en:'A* search', es:'búsqueda A*'},
    {en:'Dijkstra algorithm', es:'algoritmo de Dijkstra'},
    {en:'Bellman-Ford', es:'Bellman-Ford'},
    {en:'Floyd-Warshall', es:'Floyd-Warshall'},
    {en:'Kruskal algorithm', es:'algoritmo de Kruskal'},
    {en:'Prim algorithm', es:'algoritmo de Prim'},
    {en:'topological sort', es:'ordenamiento topológico'},
    {en:'strongly connected components', es:'componentes fuertemente conexos'},
    {en:'minimum spanning tree', es:'árbol de expansión mínimo'},
    {en:'shortest path', es:'camino más corto'}
  ],
  tech: [
    {en:'bubble sort', es:'ordenamiento burbuja'},
    {en:'selection sort', es:'ordenamiento por selección'},
    {en:'insertion sort', es:'ordenamiento por inserción'},
    {en:'merge sort', es:'ordenamiento por mezcla'},
    {en:'quick sort', es:'ordenamiento rápido'},
    {en:'heap sort', es:'ordenamiento por montículo'},
    {en:'counting sort', es:'ordenamiento por conteo'},
    {en:'radix sort', es:'ordenamiento por raíz'},
    {en:'bucket sort', es:'ordenamiento por cubetas'},
    {en:'shell sort', es:'ordenamiento de Shell'},
    {en:'tim sort', es:'ordenamiento Tim'},
    {en:'introsort', es:'introsort'},
    {en:'stable sort', es:'ordenamiento estable'},
    {en:'in-place sort', es:'ordenamiento in-situ'},
    {en:'comparison sort', es:'ordenamiento por comparación'}
  ]
};

function renderVocabCategory(categoryId, vocabList) {
  const grid = document.getElementById(categoryId);
  if (!grid) return;
  
  grid.innerHTML = '';
  vocabList.forEach(v => {
    const card = document.createElement('div');
    card.className = 'p-3 bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow duration-200 flex flex-col gap-2';
    card.innerHTML = `
      <div class="flex items-start justify-between gap-2">
        <div class="flex-1 min-w-0">
          <div class="text-sm font-semibold text-slate-800 leading-tight">${v.en}</div>
          <div class="text-xs text-slate-600 mt-1">${v.es}</div>
        </div>
        <button class="speak-btn bg-green-600 hover:bg-green-700 text-white rounded-full p-2 flex-shrink-0 transition-colors duration-200" title="Escuchar pronunciación">
          <span class="text-xs">🔊</span>
        </button>
      </div>
    `;
    card.querySelector('button').addEventListener('click', () => speak(v.en));
    grid.appendChild(card);
  });
}

function renderAllVocab() {
  renderVocabCategory('morning-vocab', VOCAB_CATEGORIES.morning);
  renderVocabCategory('school-vocab', VOCAB_CATEGORIES.school);
  renderVocabCategory('meals-vocab', VOCAB_CATEGORIES.meals);
  renderVocabCategory('social-vocab', VOCAB_CATEGORIES.social);
  renderVocabCategory('entertainment-vocab', VOCAB_CATEGORIES.entertainment);
  renderVocabCategory('evening-vocab', VOCAB_CATEGORIES.evening);
  renderVocabCategory('tech-vocab', VOCAB_CATEGORIES.tech);
}

renderAllVocab();


/* ===== Drag & Drop Matching ===== */
const MATCH_PAIRS = [
  ['algorithm','algoritmo'],
  ['data structure','estructura de datos'],
  ['time complexity','complejidad temporal'],
  ['binary search','búsqueda binaria'],
  ['merge sort','ordenamiento por mezcla'],
  ['recursion','recursión'],
  ['optimization','optimización'],
  ['big O notation','notación O grande'],
  ['dynamic programming','programación dinámica'],
  ['hash table','tabla hash']
];

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

function renderMatching(){
  const drag=document.getElementById('drag-bank');
  const drop=document.getElementById('drop-bank');
  if(!drag||!drop) return;
  drag.innerHTML=''; drop.innerHTML='';

  const english = shuffle(MATCH_PAIRS.map(p=>p[0].slice()));
  const spanish = shuffle(MATCH_PAIRS.map(p=>p[1].slice()));

  english.forEach((w,i)=>{
    const el=document.createElement('div');
    el.className='drag-item p-2 bg-white border rounded pill';
    el.draggable=true;
    el.dataset.value=w;
    el.textContent=w;
    el.addEventListener('dragstart',e=>{e.dataTransfer.setData('text/plain',w)});
    drag.appendChild(el);
  });

  spanish.forEach((t)=>{
    const dz=document.createElement('div');
    dz.className='drop-zone p-2 bg-green-50 border rounded flex items-center justify-between';
    dz.dataset.target = t;
    dz.innerHTML = `<span class="text-slate-800">${t}</span><span class="text-slate-400 text-sm">(suelta aquí)</span>`;
    dz.addEventListener('dragover',e=>e.preventDefault());
    dz.addEventListener('drop',e=>{
      e.preventDefault();
      const w=e.dataTransfer.getData('text/plain');
      dz.classList.add('filled');
      dz.querySelector('span.text-slate-400')?.remove();
      dz.dataset.value = w;
      const tag=document.createElement('span');
      tag.className='ml-2 px-2 py-1 bg-white rounded border text-slate-700';
      tag.textContent=w;
      dz.appendChild(tag);
    });
    drop.appendChild(dz);
  });
}
renderMatching();

document.getElementById('check-matching')?.addEventListener('click',()=>{
  const zones=document.querySelectorAll('#drop-bank .drop-zone');
  let ok=0;
  zones.forEach(z=>{
    const target=z.dataset.target;
    const val=z.dataset.value;
    const isCorrect = MATCH_PAIRS.some(p=>p[0]===val && p[1]===target);
    z.style.borderColor = isCorrect ? '#22c55e' : '#ef4444';
    if(isCorrect) ok++;
  });
  const res=document.getElementById('matching-result');
  res.textContent=`Correctas: ${ok} / ${MATCH_PAIRS.length}`;
  res.className = ok===MATCH_PAIRS.length ? 'mt-3 font-medium text-green-700' : 'mt-3 font-medium text-red-700';
});

/* ===== Cloze ===== */
const CLOZE = [
  {text:'An _____ is a step-by-step procedure to solve a problem.', answer:'algorithm'},
  {text:'The _____ of an algorithm measures how much time it takes.', answer:'time complexity'},
  {text:'A _____ is a way to organize and store data efficiently.', answer:'data structure'},
  {text:'_____ search is more efficient than linear search for sorted arrays.', answer:'binary'},
  {text:'_____ sort has O(n log n) time complexity in the average case.', answer:'merge'},
  {text:'_____ programming is a technique to solve problems by breaking them into subproblems.', answer:'dynamic'},
  {text:'The _____ case is when an algorithm performs at its worst.', answer:'worst'},
  {text:'_____ notation describes the upper bound of an algorithm\'s time complexity.', answer:'big O'}
];
function renderCloze(){
  const c=document.getElementById('cloze-list'); if(!c) return;
  c.innerHTML='';
  CLOZE.forEach((row,i)=>{
    const div=document.createElement('div');
    div.className='p-3 border rounded';
    div.innerHTML = `
      <label class="block mb-2 text-slate-800">${i+1}. ${row.text.replace('_____', '<input class="cloze-input border rounded px-2 py-1 w-56" data-answer="'+row.answer+'">')}</label>
      <div class="text-sm text-slate-500">Clue: ${row.answer.split(' ')[0]} ...</div>
    `;
    c.appendChild(div);
  });
}
renderCloze();
document.getElementById('check-cloze')?.addEventListener('click',()=>{
  const inputs=document.querySelectorAll('.cloze-input');
  let ok=0;
  inputs.forEach(inp=>{
    const val=inp.value.trim().toLowerCase();
    const ans=inp.dataset.answer.toLowerCase();
    const correct = val===ans;
    inp.style.borderColor = correct ? '#22c55e' : '#ef4444';
    if(correct) ok++;
  });
  const res=document.getElementById('cloze-result');
  res.textContent = `Correctas: ${ok} / ${inputs.length}`;
  res.className = ok===inputs.length ? 'mt-3 font-medium text-green-700' : 'mt-3 font-medium text-red-700';
});

/* ===== Ordering ===== */
const ORDER_ITEMS = [
  {tokens:['is','an','algorithm','step-by-step','procedure','a'], solution:'An algorithm is a step-by-step procedure'},
  {tokens:['complexity','time','measures','algorithm','performance','the'], solution:'Time complexity measures algorithm performance'},
  {tokens:['data','structure','organizes','a','efficiently','information'], solution:'A data structure organizes information efficiently'},
  {tokens:['search','binary','than','faster','linear','is','search'], solution:'Binary search is faster than linear search'},
  {tokens:['sort','merge','has','O(n','log','n)','complexity'], solution:'Merge sort has O(n log n) complexity'},
  {tokens:['programming','dynamic','solves','problems','by','breaking','them'], solution:'Dynamic programming solves problems by breaking them'},
  {tokens:['notation','big','O','describes','complexity','asymptotic'], solution:'Big O notation describes asymptotic complexity'},
  {tokens:['recursion','is','a','function','calling','itself','technique'], solution:'Recursion is a function calling itself technique'}
];

function renderOrdering(){
  const c=document.getElementById('order-list'); if(!c) return;
  c.innerHTML='';
  ORDER_ITEMS.forEach((row,idx)=>{
    const box=document.createElement('div');
    box.className='p-3 border rounded';
    const bin=document.createElement('div');
    bin.className='token-bin flex flex-wrap gap-2 p-2 bg-green-50 rounded';
    bin.dataset.index=idx;

    const pool=document.createElement('div');
    pool.className='flex flex-wrap gap-2 p-2 mt-2 bg-white rounded border';
    row.tokens.forEach(t=>{
      const tok=document.createElement('span');
      tok.className='sortable-token select-none px-3 py-1 bg-white rounded border shadow-sm';
      tok.textContent=t;
      tok.draggable=true;
      tok.addEventListener('dragstart',e=>{
        e.dataTransfer.setData('text/plain',t);
        e.dataTransfer.setData('source','pool');
      });
      pool.appendChild(tok);
    });

    // Allow dropping on bin
    bin.addEventListener('dragover',e=>e.preventDefault());
    bin.addEventListener('drop',e=>{
      e.preventDefault();
      const text=e.dataTransfer.getData('text/plain');
      const lbl=document.createElement('span');
      lbl.className='px-3 py-1 bg-white rounded border';
      lbl.textContent=text;
      lbl.draggable=true;
      lbl.addEventListener('dragstart',ev=>{
        ev.dataTransfer.setData('text/plain',text);
        ev.dataTransfer.setData('source','bin');
      });
      bin.appendChild(lbl);
    });

    // Allow dragging back to pool
    pool.addEventListener('dragover',e=>e.preventDefault());
    pool.addEventListener('drop',e=>{
      e.preventDefault();
      const text=e.dataTransfer.getData('text/plain');
      const from=e.dataTransfer.getData('source');
      if(from==='bin'){
        const lbl=[...bin.children].find(el=>el.textContent===text);
        if(lbl){ pool.appendChild(lbl); }
      }
    });

    box.innerHTML=`<p class="font-medium text-slate-800 mb-2">${idx+1}. Forma la oración correcta</p>`;
    box.appendChild(bin);
    box.appendChild(pool);
    c.appendChild(box);
  });
}
renderOrdering();

document.getElementById('check-order')?.addEventListener('click',()=>{
  const bins=document.querySelectorAll('.token-bin');
  let ok=0;
  bins.forEach((bin,i)=>{
    const formed=[...bin.children].map(el=>el.textContent).join(' ');
    const sol=ORDER_ITEMS[i].solution;
    const correct = formed.trim()===sol.trim();
    bin.style.border = correct ? '2px solid #22c55e' : '2px solid #ef4444';
    if(correct) ok++;
  });
  const res=document.getElementById('order-result');
  res.textContent = `Correctas: ${ok} / ${bins.length}`;
  res.className = ok===bins.length ? 'mt-3 font-medium text-green-700' : 'mt-3 font-medium text-red-700';
});

/* ===== Recording ===== */
let mediaRecorder, chunks = [], recordingStartTime, recordingTimer;

// Elementos del DOM
const startBtn = document.getElementById('rec-start');
const stopBtn = document.getElementById('rec-stop');
const statusEl = document.getElementById('rec-status');
const outEl = document.getElementById('rec-audio');
const timerEl = document.getElementById('rec-timer');
const timeEl = document.getElementById('rec-time');
const indicatorEl = document.getElementById('rec-indicator');
const verificationSection = document.getElementById('verification-section');
const verifyBtn = document.getElementById('verify-audio');
const verificationResult = document.getElementById('verification-result');

// Función para formatear tiempo
function formatTime(seconds) {
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

// Función para actualizar temporizador
function updateTimer() {
  if (recordingStartTime) {
    const elapsed = Math.floor((Date.now() - recordingStartTime) / 1000);
    timeEl.textContent = formatTime(elapsed);
  }
}

// Función para iniciar grabación
async function startRecording() {
  try {
    // Solicitar permisos de micrófono
    const stream = await navigator.mediaDevices.getUserMedia({ 
      audio: {
        echoCancellation: true,
        noiseSuppression: true,
        sampleRate: 44100
      } 
    });
    
    // Configurar grabador
    mediaRecorder = new MediaRecorder(stream, {
      mimeType: 'audio/webm;codecs=opus'
    });
    
    chunks = [];
    recordingStartTime = Date.now();
    
    // Configurar eventos
    mediaRecorder.ondataavailable = (e) => {
      if (e.data.size > 0) chunks.push(e.data);
    };
    
    mediaRecorder.onstop = () => {
      const blob = new Blob(chunks, { type: 'audio/webm' });
      const url = URL.createObjectURL(blob);
      const duration = Math.floor((Date.now() - recordingStartTime) / 1000);
      
      // Crear interfaz de reproducción
      outEl.innerHTML = `
        <div class="audio-player rounded-lg p-4">
          <h4 class="font-semibold text-green-800 mb-3">🎵 Audio grabado (${formatTime(duration)})</h4>
          <audio controls class="w-full mb-3" preload="metadata">
            <source src="${url}" type="audio/webm">
            Tu navegador no soporta reproducción de audio.
          </audio>
          <div class="flex gap-2">
            <a class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors" 
               href="${url}" download="mi_rutina_diaria.webm">
               📥 Descargar audio
            </a>
            <button class="bg-slate-600 text-white px-4 py-2 rounded hover:bg-slate-700 transition-colors" 
                    onclick="document.getElementById('rec-audio').innerHTML=''; resetRecordingState();">
               🗑️ Eliminar
            </button>
          </div>
          ${duration < 30 ? '<p class="text-orange-600 text-sm mt-2">⚠️ La grabación es muy corta. Intenta grabar al menos 30 segundos.</p>' : ''}
          ${duration > 60 ? '<p class="text-orange-600 text-sm mt-2">⚠️ La grabación es muy larga. Intenta mantenerla entre 30-60 segundos.</p>' : ''}
        </div>
      `;
      
      // Mostrar sección de verificación
      verificationSection.classList.remove('hidden');
      
      // Limpiar stream
      stream.getTracks().forEach(track => track.stop());
      resetRecordingState();
    };
    
    // Iniciar grabación
    mediaRecorder.start();
    
    // Actualizar UI
    startBtn.disabled = true;
    stopBtn.disabled = false;
    statusEl.textContent = 'Grabando... habla sobre tu rutina';
    timerEl.classList.remove('hidden');
    indicatorEl.classList.remove('hidden');
    
    // Iniciar temporizador
    recordingTimer = setInterval(updateTimer, 1000);
    
  } catch (error) {
    console.error('Error al acceder al micrófono:', error);
    if (error.name === 'NotAllowedError') {
      alert('❌ Permiso denegado. Por favor, permite el acceso al micrófono y recarga la página.');
    } else if (error.name === 'NotFoundError') {
      alert('❌ No se encontró ningún dispositivo de audio. Verifica que tengas un micrófono conectado.');
    } else {
      alert('❌ Error al acceder al micrófono: ' + error.message);
    }
  }
}

// Función para detener grabación
function stopRecording() {
  if (mediaRecorder && mediaRecorder.state !== 'inactive') {
    mediaRecorder.stop();
    statusEl.textContent = 'Procesando audio...';
  }
}

// Función simplificada para verificar la calidad del audio
async function verifyAudioQuality(audioBlob) {
  return new Promise((resolve) => {
    const duration = audioBlob.size / 1000; // Aproximación de duración
    
    const result = {
      duration: duration,
      passed: duration >= 30 && duration <= 60,
      score: duration >= 30 && duration <= 60 ? 100 : 50
    };
    
    resolve(result);
  });
}

// Función simplificada para analizar el contenido del audio
async function analyzeContent(audioBlob) {
  const duration = audioBlob.size / 1000;
  
  return {
    activitiesCount: duration >= 30 ? 5 : 3,
    passed: duration >= 30,
    contentScore: duration >= 30 ? 100 : 60
  };
}

// Función simplificada para calcular puntuación
function calculateScore(technicalCriteria, contentAnalysis) {
  return technicalCriteria.passed && contentAnalysis.passed ? 100 : 60;
}

// Función simplificada para mostrar resultados
function displayVerificationResult(result) {
  const score = result.score;
  const scoreColor = score >= 80 ? 'text-green-700' : 'text-yellow-700';
  const scoreBg = score >= 80 ? 'bg-green-100' : 'bg-yellow-100';
  
  verificationResult.innerHTML = `
    <div class="p-4 ${scoreBg} border border-current rounded-lg">
      <div class="flex items-center justify-between mb-3">
        <h4 class="font-semibold ${scoreColor}">Resultado de la verificación</h4>
        <span class="text-2xl font-bold ${scoreColor}">${score}%</span>
      </div>
      <div class="text-sm ${scoreColor} mb-3">
        ${score >= 80 ? '🎉 ¡Excelente! Tu grabación cumple con los criterios.' : '⚠️ Tu grabación necesita mejoras.'}
      </div>
      <div class="text-sm">
        <p>Duración: ${result.duration.toFixed(1)}s</p>
        <p>Estado: ${result.passed ? '✅ Aprobado' : '❌ Necesita más tiempo'}</p>
      </div>
    </div>
  `;
}


// Función para resetear estado
function resetRecordingState() {
  startBtn.disabled = false;
  stopBtn.disabled = true;
  statusEl.textContent = 'Listo para grabar';
  timerEl.classList.add('hidden');
  indicatorEl.classList.add('hidden');
  verificationSection.classList.add('hidden');
  verificationResult.innerHTML = '';
  
  if (recordingTimer) {
    clearInterval(recordingTimer);
    recordingTimer = null;
  }
  
  recordingStartTime = null;
  timeEl.textContent = '00:00';
}

// Event listeners
startBtn?.addEventListener('click', startRecording);
stopBtn?.addEventListener('click', stopRecording);

// Event listener para verificación
verifyBtn?.addEventListener('click', async () => {
  try {
    verifyBtn.disabled = true;
    verifyBtn.textContent = '🔍 Analizando...';
    
    const audioElement = outEl.querySelector('audio');
    if (!audioElement) {
      throw new Error('No se encontró el audio para verificar');
    }
    
    const response = await fetch(audioElement.src);
    const audioBlob = await response.blob();
    
    const result = await verifyAudioQuality(audioBlob);
    displayVerificationResult(result);
    
  } catch (error) {
    verificationResult.innerHTML = `
      <div class="p-3 bg-red-50 border border-red-200 rounded text-red-800">
        ❌ Error en la verificación: ${error.message}
      </div>
    `;
  } finally {
    verifyBtn.disabled = false;
    verifyBtn.textContent = '🔍 Verificar cumplimiento de criterios';
  }
});

// Limpiar al cargar la página
document.addEventListener('DOMContentLoaded', () => {
  resetRecordingState();
});

/* ===== Evaluación ===== */
const QUIZ = [
  {type:'mcq', q:'An _____ is a step-by-step procedure to solve a problem.', opts:['array','algorithm','function','variable'], a:'algorithm', fbOk:'✅ Respuesta correcta: b) algorithm', fbKo:'❌ Incorrecto. Un algoritmo es un procedimiento paso a paso para resolver un problema.'},
  {type:'mcq', q:'_____ complexity measures how much time an algorithm takes.', opts:['Space','Time','Memory','Data'], a:'Time', fbOk:'✅ Respuesta correcta: b) Time', fbKo:'❌ Incorrecto. La complejidad temporal mide cuánto tiempo toma un algoritmo.'},
  {type:'mcq', q:'A _____ is a way to organize and store data efficiently.', opts:['algorithm','data structure','function','loop'], a:'data structure', fbOk:'✅ Respuesta correcta: b) data structure', fbKo:'❌ Incorrecto. Una estructura de datos es una forma de organizar y almacenar datos eficientemente.'},
  {type:'mcq', q:'_____ search is more efficient than linear search for sorted arrays.', opts:['Binary','Linear','Sequential','Random'], a:'Binary', fbOk:'✅ Respuesta correcta: a) Binary', fbKo:'❌ Incorrecto. La búsqueda binaria es más eficiente que la búsqueda lineal para arreglos ordenados.'},
  {type:'mcq', q:'_____ sort has O(n log n) time complexity in the average case.', opts:['Bubble','Selection','Merge','Insertion'], a:'Merge', fbOk:'✅ Respuesta correcta: c) Merge', fbKo:'❌ Incorrecto. El ordenamiento por mezcla tiene complejidad O(n log n) en el caso promedio.'},
  {type:'mcq', q:'Choose the correct definition:', opts:['Recursion is when a function calls itself.','Recursion is when a loop repeats.','Recursion is when data is sorted.','Recursion is when an array is searched.'], a:'Recursion is when a function calls itself.', fbOk:'✅ Respuesta correcta: a) Recursion is when a function calls itself.', fbKo:'❌ Incorrecto. La recursión ocurre cuando una función se llama a sí misma.'},
  {type:'mcq', q:'_____ programming solves problems by breaking them into subproblems.', opts:['Dynamic','Static','Linear','Binary'], a:'Dynamic', fbOk:'✅ Respuesta correcta: a) Dynamic', fbKo:'❌ Incorrecto. La programación dinámica resuelve problemas dividiéndolos en subproblemas.'},
  {type:'mcq', q:'_____ notation describes the upper bound of an algorithm\'s time complexity.', opts:['Small o','Big O','Theta','Omega'], a:'Big O', fbOk:'✅ Respuesta correcta: b) Big O', fbKo:'❌ Incorrecto. La notación O grande describe el límite superior de la complejidad temporal de un algoritmo.'},
  {type:'mcq', q:'A _____ is a data structure that follows LIFO principle.', opts:['queue','stack','tree','graph'], a:'stack', fbOk:'✅ Respuesta correcta: b) stack', fbKo:'❌ Incorrecto. Una pila es una estructura de datos que sigue el principio LIFO (Last In, First Out).'},
  {type:'mcq', q:'Which algorithm has the best time complexity for searching?', opts:['Linear search O(n)','Binary search O(log n)','Bubble sort O(n²)','Selection sort O(n²)'], a:'Binary search O(log n)', fbOk:'✅ Respuesta correcta: b) Binary search O(log n)', fbKo:'❌ Incorrecto. La búsqueda binaria tiene la mejor complejidad temporal O(log n) para búsquedas.'}
];

function renderQuiz(){
  const c=document.getElementById('quiz-container'); if(!c) return;
  c.innerHTML='';
  QUIZ.forEach((item,idx)=>{
    const block=document.createElement('div');
    block.className='p-4 border rounded';
    let optionsHTML='';
    item.opts.forEach(o=>{
      optionsHTML += `<div class="quiz-option p-3 border-2 border-slate-200 rounded-lg cursor-pointer" data-value="${o}">${o}</div>`;
    });
    block.innerHTML = `
      <p class="font-semibold mb-2">${idx+1}. ${item.q}</p>
      <div class="space-y-2">${optionsHTML}</div>
      <div class="quiz-feedback mt-2 text-sm"></div>
    `;
    block.querySelectorAll('.quiz-option').forEach(opt=>{
      opt.addEventListener('click',()=>{
        block.querySelectorAll('.quiz-option').forEach(el=>el.classList.remove('selected'));
        opt.classList.add('selected');
      });
    });
    c.appendChild(block);
  });
}
renderQuiz();

document.getElementById('submit-quiz-btn')?.addEventListener('click',()=>{
  const blocks=[...document.querySelectorAll('#quiz-container > div')];
  let score=0;
  blocks.forEach((b,i)=>{
    const sel=b.querySelector('.quiz-option.selected');
    const fb=b.querySelector('.quiz-feedback');
    if(sel && sel.dataset.value===QUIZ[i].a){
      score++; fb.innerHTML = `<span class="text-green-700 font-semibold">✔️ ${QUIZ[i].fbOk}</span>`;
    }else{
      fb.innerHTML = `<span class="text-red-700 font-semibold">❌ ${QUIZ[i].fbKo}</span>`;
    }
  });
  const res=document.getElementById('quiz-result');
  res.textContent = `Tu puntuación es: ${score} de ${QUIZ.length}.`;
  res.className = score/QUIZ.length>=0.7 ? 'mt-4 text-lg font-bold text-green-700' : 'mt-4 text-lg font-bold text-red-700';
});
document.getElementById('reset-quiz-btn')?.addEventListener('click',()=>{
  renderQuiz();
  document.getElementById('quiz-result').textContent='';
});

/* ===== Sistema de síntesis de voz simplificado ===== */
let isPlaying = false;

function getSectionText(sectionId) {
  const section = document.getElementById(sectionId);
  if (!section) return '';
  
  const textElements = section.querySelectorAll('h1, h2, h3, h4, h5, h6, p, li, span:not(.speech-controls *)');
  let text = '';
  
  textElements.forEach(element => {
    if (element.textContent.trim()) {
      text += element.textContent.trim() + ' ';
    }
  });
  
  return text.trim();
}

function speakText(text, rate = 1, lang = 'en-US') {
  if (!('speechSynthesis' in window)) {
    alert('Tu navegador no soporta síntesis de voz');
    return;
  }
  
  if (isPlaying) {
    speechSynthesis.cancel();
  }
  
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = lang;
  utterance.rate = rate;
  utterance.pitch = 1;
  utterance.volume = 1;
  
  utterance.onstart = () => {
    isPlaying = true;
    updateSpeechButtons(true);
  };
  
  utterance.onend = () => {
    isPlaying = false;
    updateSpeechButtons(false);
  };
  
  utterance.onerror = () => {
    isPlaying = false;
    updateSpeechButtons(false);
  };
  
  speechSynthesis.speak(utterance);
}

function pauseSpeaking() {
  if (isPlaying) {
    speechSynthesis.pause();
    isPlaying = false;
    updateSpeechButtons(false);
  }
}

function stopSpeaking() {
  speechSynthesis.cancel();
  isPlaying = false;
  updateSpeechButtons(false);
}

function updateSpeechButtons(playing) {
  document.querySelectorAll('.speech-controls').forEach(control => {
    const playBtn = control.querySelector('.play-btn');
    const pauseBtn = control.querySelector('.pause-btn');
    const stopBtn = control.querySelector('.stop-btn');
    
    if (playing) {
      playBtn.disabled = true;
      pauseBtn.disabled = false;
      stopBtn.disabled = false;
    } else {
      playBtn.disabled = false;
      pauseBtn.disabled = true;
      stopBtn.disabled = true;
    }
  });
}

// Event listeners para controles de voz
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.speech-controls').forEach(control => {
    const playBtn = control.querySelector('.play-btn');
    const pauseBtn = control.querySelector('.pause-btn');
    const stopBtn = control.querySelector('.stop-btn');
    const rateSlider = control.querySelector('.speech-rate');
    const target = control.dataset.target;
    
    playBtn.addEventListener('click', () => {
      const text = getSectionText(target);
      const rate = parseFloat(rateSlider.value);
      const lang = target === 'contenido' ? 'en-US' : 'es-ES';
      speakText(text, rate, lang);
    });
    
    pauseBtn.addEventListener('click', pauseSpeaking);
    stopBtn.addEventListener('click', stopSpeaking);
    
    rateSlider.addEventListener('input', (e) => {
      if (isPlaying) {
        stopSpeaking();
        const text = getSectionText(target);
        const lang = target === 'contenido' ? 'en-US' : 'es-ES';
        speakText(text, parseFloat(e.target.value), lang);
      }
    });
  });
});

</script>

<!-- Modal para ampliar imagen -->
<div id="imageModal" class="image-modal">
  <div class="modal-content">
    <img id="modalImage" src="" alt="Imagen ampliada">
    <button class="close-modal" id="closeModal">&times;</button>
  </div>
</div>

<script>
// Funciones para el modal de imagen
function openImageModal(src, alt) {
  const modal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  
  modalImage.src = src;
  modalImage.alt = alt;
  modal.style.display = 'block';
  document.body.style.overflow = 'hidden'; // Prevenir scroll del body
}

function closeImageModal() {
  const modal = document.getElementById('imageModal');
  modal.style.display = 'none';
  document.body.style.overflow = 'auto'; // Restaurar scroll del body
}

// Event listeners para el modal
document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('imageModal');
  const closeBtn = document.getElementById('closeModal');
  
  // Cerrar modal con el botón X
  closeBtn.addEventListener('click', closeImageModal);
  
  // Cerrar modal al hacer clic fuera de la imagen
  modal.addEventListener('click', function(e) {
    if (e.target === this) {
      closeImageModal();
    }
  });
  
  // Cerrar modal con tecla Escape
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeImageModal();
    }
  });
});
</script>

</body>
</html>
